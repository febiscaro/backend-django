{% load static %}
<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}Enprodes Sys{% endblock %}</title>

  <!-- Bootstrap (CDN) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    /* Títulos das seções em "Meus Chamados" */
    .header-abertos   { background:#176290; color:#ffffff; }
    .header-andamento { background:#FCD773; color:#212529; }
    .header-suspensos { background:#8F1222; color:#ffffff; }
    .header-concluidos{ background:#0D8482; color:#ffffff; }
    .header-cancelados{ background:#212822; color:#ffffff; }

    .card-header { border-radius:.5rem .5rem 0 0; }

    /* Mensagens fixas no topo, acima do conteúdo */
    .flash-wrap{
      position: sticky;
      top: 0;
      z-index: 1080;
    }
  </style>

  <!-- Seu CSS -->
  <link rel="stylesheet" href="{% static 'css/app.css' %}">
  {% block extra_css %}{% endblock %}
</head>

<script src="https://unpkg.com/htmx.org@1.9.12"></script>

<body class="bg-body-tertiary">
  {% if user.is_authenticated %}
    {% include "includes/_navbar.html" %}
  {% endif %}

  {# ==== MENSAGENS (Django messages) ==== #}
  {% if messages %}
    <div class="flash-wrap container mt-3">
      {% for message in messages %}
        {% with tags=message.tags %}
          {% if 'error' in tags %}
            <div class="alert alert-danger alert-dismissible fade show shadow-sm d-flex align-items-center gap-2" role="alert">
              <strong class="me-1">Erro:</strong>
              <span>{{ message }}</span>
              <button type="button" class="btn-close ms-auto" data-bs-dismiss="alert" aria-label="Fechar"></button>
            </div>
          {% elif 'warning' in tags %}
            <div class="alert alert-warning alert-dismissible fade show shadow-sm d-flex align-items-center gap-2" role="alert">
              <strong class="me-1">Atenção:</strong>
              <span>{{ message }}</span>
              <button type="button" class="btn-close ms-auto" data-bs-dismiss="alert" aria-label="Fechar"></button>
            </div>
          {% elif 'success' in tags %}
            <div class="alert alert-success alert-dismissible fade show shadow-sm d-flex align-items-center gap-2" role="alert">
              <strong class="me-1">Pronto:</strong>
              <span>{{ message }}</span>
              <button type="button" class="btn-close ms-auto" data-bs-dismiss="alert" aria-label="Fechar"></button>
            </div>
          {% else %}
            <div class="alert alert-info alert-dismissible fade show shadow-sm d-flex align-items-center gap-2" role="alert">
              <strong class="me-1">Aviso:</strong>
              <span>{{ message }}</span>
              <button type="button" class="btn-close ms-auto" data-bs-dismiss="alert" aria-label="Fechar"></button>
            </div>
          {% endif %}
        {% endwith %}
      {% endfor %}
    </div>
  {% endif %}
  {# ==== /MENSAGENS ==== #}

  <main class="container py-4">
    {% block content %}{% endblock %}
  </main>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Seu JS -->
  <script src="{% static 'js/app.js' %}"></script>
  {% block extra_js %}{% endblock %}
</body>
</html>
